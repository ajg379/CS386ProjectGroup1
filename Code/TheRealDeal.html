<!-- Declare the document type as HTML -->
<!DOCTYPE html>

<html>

<head>

    <!-- Link the CSS -->
    <link type="text/css" rel="stylesheet", href="TheRealDeal.css"/>

    <!-- Set the webpage title -->
    <title>Neptune Project</title>

</head>

<body>

    <!-- Header bar -->
    <div id="header">

        <img src="images/Logo.png"/>

    </div>

    <!-- Main content body -->
    <div id="main">

        <h1>Instruction Generator</h1>

        <p id="hardwareMenu"></p>

        <p id="conditionMenu"></p>

        <p id="conditionInput"></p>

        <p id="actionMenu"></p>

        <p id="actionInput"></p>

        <button>Submit</button>

        <!-- Scripting -->
        <script>

            // The JSON data. Embedding it in the scripts as of right now
            // because I have not figured out how to link it as its own file.
            var JSONtext =
            [{
                "Name":"Hardware_1",
                "Conditions":
                [
                    {
                        "Name":"HW_1_Condition_1",
                        "Inputs":
                        {
                            "Hours":"INT",
                            "Minutes":"INT",
                            "Seconds":"INT"
                        }
                    },
                    {
                        "Name":"HW_1_Condition_2",
                        "Inputs":
                        {
                            "Size":"INT",
                            "Weight":"INT"
                        }
                    }
                ],
                "Actions":
                [
                    {
                        "Name":"Heat To",
                        "Inputs":
                        {
                            "Temp":"INT"
                        }
                    },
                    {
                        "Name":"Heat For",
                        "Inputs":
                        {
                            "Temp":"INT",
                            "Seconds":"INT"
                        }
                    },
                    {
                        "Name":"Heat Cycle",
                        "Inputs":
                        {
                            "Temp1":"INT",
                            "Temp2":"INT",
                            "Seconds":"INT"
                        }
                    }
                ]
            },
            {
                "Name":"Hardware_2",
                "Conditions":
                [
                    {
                        "Name":"HW_2_Condition_1",
                        "Inputs":
                        {
                            "Hours":"INT",
                            "Minutes":"INT",
                            "Seconds":"INT"
                        }
                    },
                    {
                        "Name":"HW_2_Condition_2",
                        "Inputs":
                        {
                            "Size":"INT",
                            "Weight":"INT"
                        }
                    },
                    {
                        "Name":"HW_2_Condition_3",
                        "Inputs":
                        {
                            "Seconds":"INT"
                        }
                    }
                ],
                "Actions":
                [
                    {
                        "Name":"Cool To",
                        "Inputs":
                        {
                            "Temp":"INT"
                        }
                    },
                    {
                        "Name":"Cool For",
                        "Inputs":
                        {
                            "Temp":"INT",
                            "Seconds":"INT"
                        }
                    }
                ]
            }];

            // Variables for the hardware menu selection tag, and a loop counter
            var harSelect = "";
            var count;

            // Add the label tag for the menu
            harSelect += "<h3>Select Hardware</h3>";

            // Open the select tag for hardware selection
            harSelect += "<select id=\"hardwareSelect\" onchange=\"getConditionsAndActions('hardwareSelect')\">";
            harSelect += "<option selected disabled hidden style='display: none' value=''></option>";

            // Populate the select tag with hardware in the JSON file
            for (count = 0; count < JSONtext.length; count++)
            {
                harSelect += "<option>";
                harSelect += JSONtext[count].Name;
                harSelect += "</option>";
            }

            // Close the select tag
            harSelect += "</select>";

            // Set the HTML element to our select tag
            document.getElementById("hardwareMenu").innerHTML = harSelect;

            /*
             *  Name:        getConditionsAndActions
             *  Description: Based on the hardware chosen, the labels and menus
             *               for the conditions and actions are created and
             *               populated with information from the JSON.
             */
            function getConditionsAndActions(hardwareSelect)
            {

                // Variable for the text of the selected option
                var e = document.getElementById(hardwareSelect);
                var selectedValue = e.options[e.selectedIndex].text;

                // Variable for the condition menu selection tag and action menu
                // selection tag
                var conSelect = "";
                var actSelect = "";

                // Find the index of the hardware selection in the menu
                var index;

                for (count = 0; count < JSONtext.length; count++)
                {
                    if (JSONtext[count].Name == selectedValue)
                    {
                        index = count;
                    }
                }

                // Clear any previous conditions and actions
                document.getElementById("conditionMenu").innerHTML = "";
                document.getElementById("conditionInput").innerHTML = "";
                document.getElementById("actionMenu").innerHTML = "";
                document.getElementById("actionInput").innerHTML = "";

                // Add the label tag for the condition menu
                conSelect += "<h3>Select Condition</h3>";

                // Open the select tag for the condition selection
                conSelect += "<select id=\"conditionSelect\" onchange=\"getConditionInputs('conditionSelect')\">";
                conSelect += "<option selected disabled hidden style='display: none' value=''></option>";

                // At the specified index in the JSON file, populate the
                // condition select tag with the conditions
                for (count = 0; count < JSONtext[index].Conditions.length; count++)
                {
                    conSelect += "<option>";
                    conSelect += JSONtext[index].Conditions[count].Name;
                    conSelect += "</option>";
                }

                // Close the select tag
                conSelect += "</select>";

                // Add the label tag for the action menu
                actSelect += "<h3>Select Action<h3>";

                // Open the select tag for the action selection
                actSelect += "<select id=\"actionSelect\" onchange=\"getActionInputs('actionSelect')\">";
                actSelect += "<option selected disabled hidden style='display: none' value=''></option>";

                // At the specified index in the JSON file, populate the action
                // select tag with the actions
                for (count = 0; count < JSONtext[index].Actions.length; count++)
                {
                    actSelect += "<option>";
                    actSelect += JSONtext[index].Actions[count].Name;
                    actSelect += "</option>";
                }

                // Close the select tag
                actSelect += "</select>";

                // Set the HTML elements to our selection tags
                document.getElementById("conditionMenu").innerHTML = conSelect;
                document.getElementById("actionMenu").innerHTML = actSelect;

            }

            /*
             *  Name:        getConditionInputs
             *  Description: Based on the condition chosen, the label and menu
             *               for the condition inputs are created and populated
             *               with the information from the JSON.
             */
            function getConditionInputs(conditionSelect)
            {

                // Get the text in the condition menu
                var e = document.getElementById(conditionSelect);
                var selectedValue = e.options[e.selectedIndex].text;

                // Variables for loops and tracking JSON indexs
                var count1, count2;
                var index1, index2;

                // Initialize the condition input tag
                var conInput = "";

                // Locate the indexs in the JSON file
                for (count1 = 0; count1 < JSONtext.length; count1++)
                {
                    for (count2 = 0; count2 < JSONtext[count1].Conditions.length; count2++)
                    {
                        if (JSONtext[count1].Conditions[count2].Name == selectedValue)
                        {
                            index1 = count1;
                            index2 = count2;
                        }
                    }
                }

                // Open the form tag
                conInput += "<form>";

                // Add each input to the form
                for (var key in JSONtext[index1].Conditions[index2].Inputs)
                {
                    conInput += key
                    conInput += "<input type=\"number\">";
                    conInput += "<br>";
                }

                // Close the form tag
                conInput += "</form>";

                // Set the HTML element to our tag
                document.getElementById("conditionInput").innerHTML = conInput;

            }

            /*
             *  Name:        getActionInputs
             *  Description: Based on the action chosen, the label and menu for
             *               the action inputs are created and populated with
             *               the information from the JSON.
             */
            function getActionInputs(actionSelect)
            {

                // Get the text in the condition menu
                var e = document.getElementById(actionSelect);
                var selectedValue = e.options[e.selectedIndex].text;

                // Variables for loops and tracking JSON indexs
                var count1, count2;
                var index1, index2;

                // Initialize the action input tag
                var actInput = "";

                // Locate the indexs in the JSON file
                for (count1 = 0; count1 < JSONtext.length; count1++)
                {
                    for (count2 = 0; count2 < JSONtext[count1].Actions.length; count2++)
                    {
                        if (JSONtext[count1].Actions[count2].Name == selectedValue)
                        {
                            index1 = count1;
                            index2 = count2;
                        }
                    }
                }

                // Open the form tag
                actInput += "<form>";

                // Add each input to the form
                for (var key in JSONtext[index1].Actions[index2].Inputs)
                {
                    actInput += key
                    actInput += "<input type=\"number\">";
                    actInput += "<br>";
                }

                // Close the form tag
                actInput += "</form>";

                // Set the HTML elements to our tag
                document.getElementById("actionInput").innerHTML = actInput;

            }

        </script>

    </div>

</body>

</html>
